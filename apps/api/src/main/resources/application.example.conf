ktor {
    deployment {
        port = 4000
        host = "localhost"
    }

    # Frontend URL (공개 구독 이메일 링크용)
    web {
        url = "https://vality.io"
    }
    
    application {
        modules = [ io.vality.ApplicationKt.module ]
    }
    
    # Database (JDBC for Exposed)
    database {
        url = "your-database-url"
        username = "your-database-username"
        password = "your-database-password"
        driver = "your-database-driver"
        pool {
            maximumPoolSize = 10
            minimumIdle = 5
            connectionTimeout = 30000
            idleTimeout = 600000
            maxLifetime = 1800000
        }
    }
    
    # Flyway Migration
    # 마이그레이션 실행 여부 (기본값: false)
    # true로 설정하면 애플리케이션 시작 시 자동으로 마이그레이션 실행
    # 환경 변수 FLYWAY_RUN_MIGRATION으로도 오버라이드 가능
    flyway {
        runMigration = false
    }
    
    # JWT
    jwt {
        secret = "your-secret-key-change-in-production-min-256-bits"
        issuer = "vality"
        audience = "vality-api"
        realm = "vality"
    }
    
    # CORS
    cors {
        allowedOrigins = ["http://localhost:3000", "https://vality.io"]
    }
    
    # OAuth2 설정
    oauth {
        # Google OAuth2
        google {
            clientId = "your-oauth-google-clientId"
            clientSecret = "your-oauth-clientSecret"
        }
        
        # Apple OAuth2 (Sign in with Apple)
        apple {
            clientId = ${?APPLE_CLIENT_ID}
            clientId = "your-apple-client-id"
            teamId = ${?APPLE_TEAM_ID}
            teamId = "your-apple-team-id"
            keyId = ${?APPLE_KEY_ID}
            keyId = "your-apple-key-id"
            privateKey = ${?APPLE_PRIVATE_KEY}
            privateKey = "-----BEGIN PRIVATE KEY-----\nyour-apple-private-key\n-----END PRIVATE KEY-----"
        }
    }
    
    # AWS 설정
    aws {
        # 공통 리전
        region = "ap-northeast-2"

        # 이미지 Base URL (환경 변수에서 우선 읽고, 없으면 기본값 사용)
        resourceBaseUrl = "your-aws-resourceBaseUrl"
        
        # S3 설정 (vality-s3-user)
        s3 {
            # 환경 변수에서 우선 읽고, 없으면 기본값 사용
            accessKeyId = "your-aws-s3-accessKeyId"
            secretAccessKey = "your-aws-s3-secretAccessKey"
            bucket = "your-aws-s3-bucket"
        }
        
        # SES 설정 (vality-ses-user)
        ses {
            # 환경 변수에서 우선 읽고, 없으면 기본값 사용
            accessKeyId = "your-aws-ses-accessKeyId"
            secretAccessKey = "your-aws-ses-secretAccessKey"
            fromEmail = "noreply@vality.io"
            fromName = "Vality"
        }
    }
    
    # Lemon Squeezy 설정
    lemonSqueezy {
        # 웹훅 서명 검증용 시크릿 키
        # Lemon Squeezy 대시보드 > Settings > Webhooks에서 확인
        webhookSecret = "your-lemonSqueezy-webhookSecret"
        
        # Starter 플랜 Variant ID
        # Lemon Squeezy 대시보드 > Products > Variants에서 확인
        starterVariantId = your-lemonSqueezy-starterVariantId
        
        # Pro 플랜 Variant ID
        # Lemon Squeezy 대시보드 > Products > Variants에서 확인
        proVariantId = your-lemonSqueezy-proVariantId

        # Store ID (옵션, store-{id}.lemonsqueezy.com 형식 사용 시)
        storeId = "your-lemonSqueezy-storeId"

        # 체크아웃 Base URL (기본값: https://store.lemonsqueezy.com/checkout)
        checkoutBaseUrl = "your-lemonSqueezy-checkoutBaseUrl"
    }
}

