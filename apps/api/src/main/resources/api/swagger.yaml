openapi: 3.0.3
info:
  title: Vality API
  description: |
    Vality ë‰´ìŠ¤ë ˆí„° í”Œë«í¼ API ë¬¸ì„œ
    
    ## ì¸ì¦
    - ëŒ€ë¶€ë¶„ì˜ APIëŠ” JWT ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤
    - ì¸ì¦ì´ í•„ìš” ì—†ëŠ” APIëŠ” ê° ì—”ë“œí¬ì¸íŠ¸ì— **ğŸ”“ ì¸ì¦ ë¶ˆí•„ìš”** í‘œì‹œê°€ ìˆìŠµë‹ˆë‹¤
    - JWT í† í°ì€ `Authorization: Bearer {token}` í—¤ë”ë¡œ ì „ì†¡í•©ë‹ˆë‹¤
    
    ## ê³µê°œ API (ì¸ì¦ ë¶ˆí•„ìš”)
    - `/api/public/*` - ê³µê°œ í”„ë¡œí•„, ì´ìŠˆ ì¡°íšŒ
    - `/api/auth/*` - ì¸ì¦ ê´€ë ¨ (ì¼ë¶€)
    - `/api/health` - í—¬ìŠ¤ ì²´í¬
    - `/api/docs/*` - ë¬¸ì„œ ì¡°íšŒ
  version: 1.0.0
  contact:
    name: Vality Support
    email: support@vality.io

servers:
  - url: http://localhost:4000
    description: ë¡œì»¬ ê°œë°œ ì„œë²„
  - url: https://api.vality.io
    description: í”„ë¡œë•ì…˜ ì„œë²„

tags:
  - name: Health
    description: í—¬ìŠ¤ ì²´í¬
  - name: Auth
    description: ì¸ì¦ ê´€ë ¨ API
  - name: OAuth
    description: OAuth ì†Œì…œ ë¡œê·¸ì¸
  - name: Public Profile
    description: ğŸ”“ ê³µê°œ í”„ë¡œí•„ ë° ì´ìŠˆ ì¡°íšŒ (ì¸ì¦ ë¶ˆí•„ìš”)
  - name: Public Subscriber
    description: ğŸ”“ ê³µê°œ êµ¬ë… (ì¸ì¦ ë¶ˆí•„ìš”)
  - name: Newsletter
    description: ë‰´ìŠ¤ë ˆí„° ê´€ë¦¬ (ì¸ì¦ í•„ìš”)
  - name: Issue
    description: ì´ìŠˆ ê´€ë¦¬ (ì¸ì¦ í•„ìš”)
  - name: Subscriber
    description: êµ¬ë…ì ê´€ë¦¬ (ì¸ì¦ í•„ìš”)
  - name: Upload
    description: íŒŒì¼ ì—…ë¡œë“œ (ì¸ì¦ í•„ìš”)
  - name: Test
    description: í…ŒìŠ¤íŠ¸ìš© API

security:
  - bearerAuth: []

paths:
  # ============================================
  # Health Check
  # ============================================
  /api/health:
    get:
      tags:
        - Health
      summary: í—¬ìŠ¤ ì²´í¬
      description: ğŸ”“ ì„œë²„ ìƒíƒœ í™•ì¸ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      responses:
        '200':
          description: ì„œë²„ê°€ ì •ìƒ ì‘ë™ ì¤‘
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"

  # ============================================
  # Auth
  # ============================================
  /api/auth/send-verification-code:
    post:
      tags:
        - Auth
      summary: ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ë°œì†¡
      description: ğŸ”“ ì´ë©”ì¼ë¡œ ì¸ì¦ ì½”ë“œë¥¼ ë°œì†¡í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendVerificationCodeRequest'
      responses:
        '200':
          description: ì¸ì¦ ì½”ë“œ ë°œì†¡ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SendVerificationCodeResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/auth/email-auth:
    post:
      tags:
        - Auth
      summary: ì´ë©”ì¼ ì¸ì¦ ë¡œê·¸ì¸/íšŒì›ê°€ì…
      description: ğŸ”“ ì´ë©”ì¼ê³¼ ì¸ì¦ ì½”ë“œë¡œ ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmailAuthRequest'
      responses:
        '200':
          description: ì¸ì¦ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_AuthResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/auth/refresh:
    post:
      tags:
        - Auth
      summary: í† í° ê°±ì‹ 
      description: ğŸ”“ ë¦¬í”„ë ˆì‹œ í† í°ìœ¼ë¡œ ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: í† í° ê°±ì‹  ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_AuthResponse'
        '401':
          description: ì¸ì¦ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/auth/check-username:
    get:
      tags:
        - Auth
      summary: ì‚¬ìš©ìëª… ì¤‘ë³µ í™•ì¸
      description: ğŸ”“ ì‚¬ìš©ìëª…ì´ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
          description: í™•ì¸í•  ì‚¬ìš©ìëª…
      responses:
        '200':
          description: ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
          content:
            application/json:
              schema:
                type: object
                properties:
                  available:
                    type: boolean
                    description: ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/auth/me:
    get:
      tags:
        - Auth
      summary: ë‚´ í”„ë¡œí•„ ì¡°íšŒ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ í”„ë¡œí•„ì„ ì¡°íšŒí•©ë‹ˆë‹¤
      responses:
        '200':
          description: í”„ë¡œí•„ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_UserResponse'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    patch:
      tags:
        - Auth
      summary: ë‚´ í”„ë¡œí•„ ìˆ˜ì •
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ í”„ë¡œí•„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: í”„ë¡œí•„ ìˆ˜ì • ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_UserResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    delete:
      tags:
        - Auth
      summary: ê³„ì • ì‚­ì œ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ê³„ì •ì„ ì‚­ì œí•©ë‹ˆë‹¤
      responses:
        '200':
          description: ê³„ì • ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Message'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # OAuth
  # ============================================
  /api/auth/oauth/google:
    get:
      tags:
        - OAuth
      summary: Google OAuth ë¡œê·¸ì¸ ì‹œì‘
      description: ğŸ”“ Google OAuth ë¡œê·¸ì¸ì„ ì‹œì‘í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      responses:
        '302':
          description: Google ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/auth/oauth/google/complete:
    post:
      tags:
        - OAuth
      summary: Google OAuth ë¡œê·¸ì¸ ì™„ë£Œ
      description: ğŸ”“ Google OAuth ì½œë°±ì„ ì²˜ë¦¬í•˜ê³  í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  description: Google OAuth ì¸ì¦ ì½”ë“œ
      responses:
        '200':
          description: ë¡œê·¸ì¸ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_AuthResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Public Profile (ì¸ì¦ ë¶ˆí•„ìš”)
  # ============================================
  /api/public/issues:
    get:
      tags:
        - Public Profile
      summary: ëª¨ë“  ì‚¬ìš©ìì˜ ë°œí–‰ëœ ì´ìŠˆ ëª©ë¡ ì¡°íšŒ
      description: |
        ğŸ”“ ëª¨ë“  ì‚¬ìš©ìì˜ ë°œí–‰ëœ ì´ìŠˆë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        í˜ì´ì§•ì„ ì§€ì›í•˜ë©°, ê° ì´ìŠˆì—ëŠ” ë‰´ìŠ¤ë ˆí„° ì •ë³´ì™€ ì‘ì„±ì ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          description: ì¡°íšŒí•  ì´ìŠˆ ê°œìˆ˜
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
            minimum: 0
          description: ê±´ë„ˆë›¸ ì´ìŠˆ ê°œìˆ˜
      responses:
        '200':
          description: ì´ìŠˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicIssueList'
        '500':
          description: ì„œë²„ ì˜¤ë¥˜
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}:
    get:
      tags:
        - Public Profile
      summary: ê³µê°œ ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
      description: ğŸ”“ íŠ¹ì • ì‚¬ìš©ìì˜ ê³µê°œ í”„ë¡œí•„ì„ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
      responses:
        '200':
          description: í”„ë¡œí•„ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicUserProfile'
        '404':
          description: ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}/newsletters:
    get:
      tags:
        - Public Profile
      summary: ì‚¬ìš©ìì˜ ë‰´ìŠ¤ë ˆí„° ëª©ë¡ ì¡°íšŒ
      description: ğŸ”“ íŠ¹ì • ì‚¬ìš©ìê°€ ë³´ìœ í•œ ë‰´ìŠ¤ë ˆí„° ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
      responses:
        '200':
          description: ë‰´ìŠ¤ë ˆí„° ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicNewsletterList'
        '404':
          description: ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}/issues:
    get:
      tags:
        - Public Profile
      summary: ì‚¬ìš©ìì˜ ë°œí–‰ëœ ì´ìŠˆ ëª©ë¡ ì¡°íšŒ
      description: |
        ğŸ”“ íŠ¹ì • ì‚¬ìš©ìì˜ ëª¨ë“  ë‰´ìŠ¤ë ˆí„°ì—ì„œ ë°œí–‰ëœ ì´ìŠˆë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        í˜ì´ì§•ì„ ì§€ì›í•©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          description: ì¡°íšŒí•  ì´ìŠˆ ê°œìˆ˜
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
            minimum: 0
          description: ê±´ë„ˆë›¸ ì´ìŠˆ ê°œìˆ˜
      responses:
        '200':
          description: ì´ìŠˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicIssueList'
        '404':
          description: ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}/newsletters/{newsletterSlug}:
    get:
      tags:
        - Public Profile
      summary: íŠ¹ì • ë‰´ìŠ¤ë ˆí„° ì¡°íšŒ
      description: ğŸ”“ ì‚¬ìš©ìëª…ê³¼ ë‰´ìŠ¤ë ˆí„° slugë¡œ ë‰´ìŠ¤ë ˆí„° ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
        - name: newsletterSlug
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° slug
      responses:
        '200':
          description: ë‰´ìŠ¤ë ˆí„° ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicNewsletter'
        '404':
          description: ë‰´ìŠ¤ë ˆí„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}/newsletters/{newsletterSlug}/issues:
    get:
      tags:
        - Public Profile
      summary: íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì˜ ë°œí–‰ëœ ì´ìŠˆ ëª©ë¡ ì¡°íšŒ
      description: |
        ğŸ”“ íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì˜ ë°œí–‰ëœ ì´ìŠˆë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        í˜ì´ì§•ì„ ì§€ì›í•©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
        - name: newsletterSlug
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° slug
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
          description: ì¡°íšŒí•  ì´ìŠˆ ê°œìˆ˜
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
            minimum: 0
          description: ê±´ë„ˆë›¸ ì´ìŠˆ ê°œìˆ˜
      responses:
        '200':
          description: ì´ìŠˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicIssueList'
        '404':
          description: ë‰´ìŠ¤ë ˆí„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/users/{username}/newsletters/{newsletterSlug}/issues/{issueSlug}:
    get:
      tags:
        - Public Profile
      summary: íŠ¹ì • ì´ìŠˆ ìƒì„¸ ì¡°íšŒ
      description: |
        ğŸ”“ íŠ¹ì • ì´ìŠˆì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        ì´ìŠˆ, ë‰´ìŠ¤ë ˆí„°, ì‘ì„±ìì— ëŒ€í•œ ëª¨ë“  ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤.
        ë°œí–‰ëœ ì´ìŠˆë§Œ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: ì‚¬ìš©ìëª…
        - name: newsletterSlug
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° slug
        - name: issueSlug
          in: path
          required: true
          schema:
            type: string
          description: ì´ìŠˆ slug
      responses:
        '200':
          description: ì´ìŠˆ ìƒì„¸ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PublicIssueDetail'
        '404':
          description: ì´ìŠˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Public Subscriber (ì¸ì¦ ë¶ˆí•„ìš”)
  # ============================================
  /api/public/newsletter/{newsletterId}/subscribe:
    post:
      tags:
        - Public Subscriber
      summary: ë‰´ìŠ¤ë ˆí„° êµ¬ë… ì‹ ì²­
      description: |
        ğŸ”“ ë‰´ìŠ¤ë ˆí„° êµ¬ë…ì„ ì‹ ì²­í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        ì´ë©”ì¼ë¡œ í™•ì¸ ë§í¬ê°€ ë°œì†¡ë˜ë©°, í™•ì¸ í›„ êµ¬ë…ì´ ì™„ë£Œë©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  description: êµ¬ë…í•  ì´ë©”ì¼ ì£¼ì†Œ
      responses:
        '201':
          description: êµ¬ë… ì‹ ì²­ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SubscriberResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/public/subscribe/confirm:
    get:
      tags:
        - Public Subscriber
      summary: êµ¬ë… í™•ì¸
      description: |
        ğŸ”“ ì´ë©”ì¼ë¡œ ë°›ì€ í† í°ìœ¼ë¡œ êµ¬ë…ì„ í™•ì¸í•©ë‹ˆë‹¤ (ì¸ì¦ ë¶ˆí•„ìš”)
        
        ì´ë©”ì¼ì˜ í™•ì¸ ë§í¬ë¥¼ í´ë¦­í•˜ë©´ ì´ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë©ë‹ˆë‹¤.
      security: []
      parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: êµ¬ë… í™•ì¸ í† í°
      responses:
        '200':
          description: êµ¬ë… í™•ì¸ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SubscribeConfirmResponse'
        '400':
          description: ì˜ëª»ëœ í† í°
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Newsletter (ì¸ì¦ í•„ìš”)
  # ============================================
  /api/newsletters:
    post:
      tags:
        - Newsletter
      summary: ë‰´ìŠ¤ë ˆí„° ìƒì„±
      description: ìƒˆë¡œìš´ ë‰´ìŠ¤ë ˆí„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewsletterRequest'
      responses:
        '201':
          description: ë‰´ìŠ¤ë ˆí„° ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_NewsletterResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    get:
      tags:
        - Newsletter
      summary: ë‚´ ë‰´ìŠ¤ë ˆí„° ëª©ë¡ ì¡°íšŒ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ë³´ìœ í•œ ë‰´ìŠ¤ë ˆí„° ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤
      responses:
        '200':
          description: ë‰´ìŠ¤ë ˆí„° ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_NewsletterList'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/newsletters/{newsletterId}:
    get:
      tags:
        - Newsletter
      summary: ë‰´ìŠ¤ë ˆí„° ì¡°íšŒ
      description: íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      responses:
        '200':
          description: ë‰´ìŠ¤ë ˆí„° ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_NewsletterResponse'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '404':
          description: ë‰´ìŠ¤ë ˆí„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    patch:
      tags:
        - Newsletter
      summary: ë‰´ìŠ¤ë ˆí„° ìˆ˜ì •
      description: ë‰´ìŠ¤ë ˆí„° ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNewsletterRequest'
      responses:
        '200':
          description: ë‰´ìŠ¤ë ˆí„° ìˆ˜ì • ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_NewsletterResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Issue (ì¸ì¦ í•„ìš”)
  # ============================================
  /api/newsletters/{newsletterId}/issues:
    post:
      tags:
        - Issue
      summary: ì´ìŠˆ ìƒì„±
      description: |
        ìƒˆë¡œìš´ ì´ìŠˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        
        DRAFT ìƒíƒœë¡œ ìƒì„±ë˜ë©°, titleì€ nullableì…ë‹ˆë‹¤.
        PUBLISHED ë˜ëŠ” SCHEDULED ìƒíƒœë¡œ ë³€ê²½í•˜ë ¤ë©´ titleì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateIssueRequest'
      responses:
        '201':
          description: ì´ìŠˆ ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_IssueResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    get:
      tags:
        - Issue
      summary: ì´ìŠˆ ëª©ë¡ ì¡°íšŒ
      description: íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì˜ ì´ìŠˆ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      responses:
        '200':
          description: ì´ìŠˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_IssueList'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/newsletters/{newsletterId}/issues/{issueId}:
    get:
      tags:
        - Issue
      summary: ì´ìŠˆ ì¡°íšŒ
      description: íŠ¹ì • ì´ìŠˆì˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
        - name: issueId
          in: path
          required: true
          schema:
            type: string
          description: ì´ìŠˆ ID
      responses:
        '200':
          description: ì´ìŠˆ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_IssueResponse'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '404':
          description: ì´ìŠˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    patch:
      tags:
        - Issue
      summary: ì´ìŠˆ ìˆ˜ì •
      description: |
        ì´ìŠˆ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ìˆ˜ì • ê°€ëŠ¥)
        
        PUBLISHED ë˜ëŠ” SCHEDULED ìƒíƒœë¡œ ë³€ê²½í•˜ë ¤ë©´ titleì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
        - name: issueId
          in: path
          required: true
          schema:
            type: string
          description: ì´ìŠˆ ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateIssueRequest'
      responses:
        '200':
          description: ì´ìŠˆ ìˆ˜ì • ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_IssueResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    delete:
      tags:
        - Issue
      summary: ì´ìŠˆ ì‚­ì œ
      description: ì´ìŠˆë¥¼ ì‚­ì œí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì‚­ì œ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
        - name: issueId
          in: path
          required: true
          schema:
            type: string
          description: ì´ìŠˆ ID
      responses:
        '200':
          description: ì´ìŠˆ ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Message'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '404':
          description: ì´ìŠˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Subscriber (ì¸ì¦ í•„ìš”)
  # ============================================
  /api/newsletters/{newsletterId}/subscribers:
    get:
      tags:
        - Subscriber
      summary: êµ¬ë…ì ëª©ë¡ ì¡°íšŒ
      description: íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì˜ êµ¬ë…ì ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì¡°íšŒ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      responses:
        '200':
          description: êµ¬ë…ì ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SubscriberList'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

    post:
      tags:
        - Subscriber
      summary: êµ¬ë…ì ì¶”ê°€
      description: íŠ¹ì • ë‰´ìŠ¤ë ˆí„°ì— êµ¬ë…ìë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì¶”ê°€ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSubscriberRequest'
      responses:
        '201':
          description: êµ¬ë…ì ì¶”ê°€ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SubscriberResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/newsletters/{newsletterId}/subscribers/{subscriberId}:
    delete:
      tags:
        - Subscriber
      summary: êµ¬ë…ì ì‚­ì œ
      description: êµ¬ë…ìë¥¼ ì‚­ì œí•©ë‹ˆë‹¤ (ì†Œìœ ìë§Œ ì‚­ì œ ê°€ëŠ¥)
      parameters:
        - name: newsletterId
          in: path
          required: true
          schema:
            type: string
          description: ë‰´ìŠ¤ë ˆí„° ID
        - name: subscriberId
          in: path
          required: true
          schema:
            type: string
          description: êµ¬ë…ì ID
      responses:
        '200':
          description: êµ¬ë…ì ì‚­ì œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Message'
        '403':
          description: ê¶Œí•œ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '404':
          description: êµ¬ë…ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  # ============================================
  # Upload (ì¸ì¦ í•„ìš”)
  # ============================================
  /api/upload/issues/{issueId}/images:
    post:
      tags:
        - Upload
      summary: ì´ìŠˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ
      description: |
        ì´ìŠˆì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.
        
        multipart/form-data í˜•ì‹ìœ¼ë¡œ íŒŒì¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
        ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ CDN URLì´ ë°˜í™˜ë©ë‹ˆë‹¤.
      parameters:
        - name: issueId
          in: path
          required: true
          schema:
            type: string
          description: ì´ìŠˆ ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: ì´ë¯¸ì§€ íŒŒì¼
      responses:
        '200':
          description: ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_ImageUploadResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­ (íŒŒì¼ í˜•ì‹, í¬ê¸° ë“±)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

  /api/upload/presigned-url:
    post:
      tags:
        - Upload
      summary: Presigned URL ìƒì„±
      description: |
        S3ì— ì§ì ‘ ì—…ë¡œë“œí•˜ê¸° ìœ„í•œ Presigned URLì„ ìƒì„±í•©ë‹ˆë‹¤.
        
        ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ë‚˜ ì´ìŠˆ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‚¬ìš©ë©ë‹ˆë‹¤.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PresignedUrlRequest'
      responses:
        '200':
          description: Presigned URL ìƒì„± ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_PresignedUrlResponse'
        '400':
          description: ì˜ëª»ëœ ìš”ì²­
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'
        '401':
          description: ì¸ì¦ í•„ìš”
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_Error'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT í† í°ì„ Bearer í˜•ì‹ìœ¼ë¡œ ì „ì†¡

  schemas:
    # ê³µí†µ ì‘ë‹µ
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
          nullable: true
        data:
          type: object
          nullable: true

    ApiResponse_Error:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            message:
              type: string
              example: "Error message"

    ApiResponse_Message:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            message:
              type: string
              example: "Success message"

    # Auth
    SendVerificationCodeRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: ì¸ì¦ ì½”ë“œë¥¼ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œ

    SendVerificationCodeResponse:
      type: object
      properties:
        sent:
          type: boolean
          example: true

    EmailAuthRequest:
      type: object
      required:
        - email
        - code
      properties:
        email:
          type: string
          format: email
          description: ì´ë©”ì¼ ì£¼ì†Œ
        code:
          type: string
          description: ì¸ì¦ ì½”ë“œ

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: ë¦¬í”„ë ˆì‹œ í† í°

    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: ì•¡ì„¸ìŠ¤ í† í°
        refreshToken:
          type: string
          description: ë¦¬í”„ë ˆì‹œ í† í°
        user:
          $ref: '#/components/schemas/UserResponse'

    ApiResponse_AuthResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/AuthResponse'

    UpdateProfileRequest:
      type: object
      properties:
        username:
          type: string
          description: ì‚¬ìš©ìëª…
        name:
          type: string
          nullable: true
          description: ì´ë¦„
        bio:
          type: string
          nullable: true
          description: ìê¸°ì†Œê°œ

    UserResponse:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        username:
          type: string
          nullable: true
        name:
          type: string
          nullable: true
        bio:
          type: string
          nullable: true
        imageUrl:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    ApiResponse_UserResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/UserResponse'

    ApiResponse_SendVerificationCodeResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/SendVerificationCodeResponse'

    # Public Profile
    PublicUserProfile:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        name:
          type: string
          nullable: true
        bio:
          type: string
          nullable: true
        imageUrl:
          type: string
          nullable: true

    ApiResponse_PublicUserProfile:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PublicUserProfile'

    PublicNewsletter:
      type: object
      properties:
        id:
          type: string
        slug:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        subscriberCount:
          type: integer
          format: int64

    PublicNewsletterList:
      type: array
      items:
        $ref: '#/components/schemas/PublicNewsletter'

    ApiResponse_PublicNewsletterList:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PublicNewsletterList'

    ApiResponse_PublicNewsletter:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PublicNewsletter'

    PublicIssue:
      type: object
      description: ì´ìŠˆ ëª©ë¡ ì¡°íšŒìš© (Preview ì •ë³´)
      properties:
        id:
          type: string
        slug:
          type: string
        title:
          type: string
          nullable: true
        excerpt:
          type: string
          nullable: true
          description: ìš”ì•½ (Short ë²„ì „)
        publishedAt:
          type: string
          format: date-time
        newsletterId:
          type: string
        newsletterSlug:
          type: string
        newsletterName:
          type: string
        ownerUsername:
          type: string
          nullable: true
        ownerName:
          type: string
          nullable: true
        ownerImageUrl:
          type: string
          nullable: true

    PublicIssueList:
      type: array
      items:
        $ref: '#/components/schemas/PublicIssue'

    ApiResponse_PublicIssueList:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PublicIssueList'

    PublicIssueDetail:
      type: object
      description: ì´ìŠˆ ìƒì„¸ ì¡°íšŒìš© (ëª¨ë“  ì •ë³´ í¬í•¨)
      properties:
        id:
          type: string
        slug:
          type: string
        title:
          type: string
          nullable: true
        content:
          type: string
          description: ì „ì²´ ì½˜í…ì¸  (HTML)
        excerpt:
          type: string
          nullable: true
        coverImageUrl:
          type: string
          nullable: true
        publishedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        newsletterId:
          type: string
        newsletterSlug:
          type: string
        newsletterName:
          type: string
        newsletterDescription:
          type: string
          nullable: true
        ownerId:
          type: string
        ownerUsername:
          type: string
          nullable: true
        ownerName:
          type: string
          nullable: true
        ownerBio:
          type: string
          nullable: true
        ownerImageUrl:
          type: string
          nullable: true

    ApiResponse_PublicIssueDetail:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PublicIssueDetail'

    # Newsletter
    CreateNewsletterRequest:
      type: object
      required:
        - name
        - slug
      properties:
        name:
          type: string
          description: ë‰´ìŠ¤ë ˆí„° ì´ë¦„
        slug:
          type: string
          description: ë‰´ìŠ¤ë ˆí„° slug (URLì— ì‚¬ìš©)
        description:
          type: string
          nullable: true
          description: ë‰´ìŠ¤ë ˆí„° ì„¤ëª…

    UpdateNewsletterRequest:
      type: object
      properties:
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true

    NewsletterResponse:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        timezone:
          type: string
        ownerId:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    NewsletterList:
      type: array
      items:
        $ref: '#/components/schemas/NewsletterResponse'

    ApiResponse_NewsletterResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/NewsletterResponse'

    ApiResponse_NewsletterList:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/NewsletterList'

    # Issue
    CreateIssueRequest:
      type: object
      properties:
        title:
          type: string
          nullable: true
          description: ì´ìŠˆ ì œëª© (DRAFTëŠ” nullable, PUBLISHED/SCHEDULEDëŠ” í•„ìˆ˜)
        slug:
          type: string
          nullable: true
          description: ì´ìŠˆ slug (ìë™ ìƒì„± ê°€ëŠ¥)
        content:
          type: string
          nullable: true
          description: ì´ìŠˆ ë‚´ìš© (ê¸°ë³¸ê°’ ë¹ˆ ë¬¸ìì—´)
        excerpt:
          type: string
          nullable: true
          description: ì´ìŠˆ ìš”ì•½
        coverImageUrl:
          type: string
          nullable: true
          description: ì»¤ë²„ ì´ë¯¸ì§€ URL
        status:
          type: string
          enum: [DRAFT, PUBLISHED, SCHEDULED]
          default: DRAFT
          description: ì´ìŠˆ ìƒíƒœ

    UpdateIssueRequest:
      type: object
      properties:
        title:
          type: string
          nullable: true
          description: ì´ìŠˆ ì œëª© (PUBLISHED/SCHEDULEDëŠ” í•„ìˆ˜)
        slug:
          type: string
          nullable: true
        content:
          type: string
          nullable: true
        excerpt:
          type: string
          nullable: true
        coverImageUrl:
          type: string
          nullable: true
        status:
          type: string
          enum: [DRAFT, PUBLISHED, SCHEDULED]
        publishedAt:
          type: string
          format: date-time
          nullable: true
        scheduledAt:
          type: string
          format: date-time
          nullable: true

    IssueResponse:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
          nullable: true
        slug:
          type: string
        content:
          type: string
        excerpt:
          type: string
          nullable: true
        coverImageUrl:
          type: string
          nullable: true
        status:
          type: string
          enum: [DRAFT, PUBLISHED, SCHEDULED]
        publishedAt:
          type: string
          format: date-time
          nullable: true
        scheduledAt:
          type: string
          format: date-time
          nullable: true
        newsletterId:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    IssueList:
      type: array
      items:
        $ref: '#/components/schemas/IssueResponse'

    ApiResponse_IssueResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/IssueResponse'

    ApiResponse_IssueList:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/IssueList'

    # Subscriber
    CreateSubscriberRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: êµ¬ë…ì ì´ë©”ì¼ ì£¼ì†Œ

    SubscriberResponse:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        status:
          type: string
          enum: [PENDING, CONFIRMED, UNSUBSCRIBED]
        subscribedAt:
          type: string
          format: date-time
        confirmedAt:
          type: string
          format: date-time
          nullable: true
        unsubscribedAt:
          type: string
          format: date-time
          nullable: true
        newsletterId:
          type: string

    SubscriberList:
      type: array
      items:
        $ref: '#/components/schemas/SubscriberResponse'

    ApiResponse_SubscriberResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/SubscriberResponse'

    ApiResponse_SubscriberList:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/SubscriberList'

    SubscribeConfirmResponse:
      type: object
      properties:
        confirmed:
          type: boolean
        message:
          type: string

    ApiResponse_SubscribeConfirmResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/SubscribeConfirmResponse'

    # Upload
    PresignedUrlRequest:
      type: object
      required:
        - type
        - filename
        - contentType
        - fileSize
      properties:
        type:
          type: string
          enum: [user, issue]
          description: ì—…ë¡œë“œ íƒ€ì… (user í”„ë¡œí•„ ì´ë¯¸ì§€, issue ì´ìŠˆ ì´ë¯¸ì§€)
        filename:
          type: string
          description: íŒŒì¼ëª…
        contentType:
          type: string
          description: íŒŒì¼ MIME íƒ€ì… (ì˜ˆ image/jpeg)
        fileSize:
          type: integer
          description: íŒŒì¼ í¬ê¸° (bytes)
        issueId:
          type: string
          nullable: true
          description: ì´ìŠˆ ID (typeì´ issueì¸ ê²½ìš° í•„ìˆ˜)

    PresignedUrlResponse:
      type: object
      properties:
        presignedUrl:
          type: string
          description: S3 Presigned URL
        filename:
          type: string
          description: ì €ì¥ë  íŒŒì¼ëª…
        key:
          type: string
          description: S3 Key (ê²½ë¡œ)

    ApiResponse_PresignedUrlResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/PresignedUrlResponse'

    ImageUploadResponse:
      type: object
      properties:
        url:
          type: string
          description: ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ CDN URL
        key:
          type: string
          description: S3 Key (ê²½ë¡œ)

    ApiResponse_ImageUploadResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              $ref: '#/components/schemas/ImageUploadResponse'

