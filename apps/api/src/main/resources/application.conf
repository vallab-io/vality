ktor {
    deployment {
        port = 4000
        host = "localhost"
    }
    
    application {
        modules = [ io.vality.ApplicationKt.module ]
    }
    
    # Database (JDBC for Exposed)
    database {
        url = "jdbc:postgresql://aws-1-ap-northeast-1.pooler.supabase.com:6543/postgres"
        username = "postgres.jbpimadgmvwiuoqpxfpd"
        password = "vAliTyio@25"
        driver = "org.postgresql.Driver"
        pool {
            maximumPoolSize = 10
            minimumIdle = 5
            connectionTimeout = 30000
            idleTimeout = 600000
            maxLifetime = 1800000
        }
    }
    
    # Flyway Migration
    # 마이그레이션 실행 여부 (기본값: false)
    # true로 설정하면 애플리케이션 시작 시 자동으로 마이그레이션 실행
    # 환경 변수 FLYWAY_RUN_MIGRATION으로도 오버라이드 가능
    flyway {
        runMigration = false
    }
    
    # JWT
    jwt {
        secret = "your-secret-key-change-in-production-min-256-bits"
        issuer = "vality"
        audience = "vality-api"
        realm = "vality"
    }
    
    # CORS
    cors {
        allowedOrigins = ["http://localhost:3000"]
    }
    
    # OAuth2 설정
    oauth {
        # Google OAuth2
        google {
            clientId = "187363549328-63co54d7suciup0u145m45lamc0piel7.apps.googleusercontent.com"
            clientSecret = "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"
        }
        
        # Apple OAuth2 (Sign in with Apple)
        apple {
            clientId = ${?APPLE_CLIENT_ID}
            clientId = "your-apple-client-id"
            teamId = ${?APPLE_TEAM_ID}
            teamId = "your-apple-team-id"
            keyId = ${?APPLE_KEY_ID}
            keyId = "your-apple-key-id"
            privateKey = ${?APPLE_PRIVATE_KEY}
            privateKey = "-----BEGIN PRIVATE KEY-----\nyour-apple-private-key\n-----END PRIVATE KEY-----"
        }
    }
}

