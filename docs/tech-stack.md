# ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜ (Tech Stack)

> ì°¸ê³ : [ì¸í”„ëŸ° í´ë¡ ì½”ë”© ê°•ì˜](https://www.inflearn.com/course/%EC%9D%B8%ED%94%84%EB%9F%B0-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-part1) ê¸°ìˆ  ìŠ¤íƒ ê¸°ë°˜

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í´ë¼ì´ì–¸íŠ¸                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   ì›¹ ì•±      â”‚  â”‚   ì´ë©”ì¼     â”‚  â”‚  RSS Reader  â”‚          â”‚
â”‚  â”‚  (Next.js)   â”‚  â”‚   í´ë¼ì´ì–¸íŠ¸  â”‚  â”‚              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Layer (NestJS)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         REST API + Swagger (OpenAPI Codegen)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ë‰´ìŠ¤ë ˆí„°   â”‚  â”‚ êµ¬ë…ì     â”‚  â”‚   SEO      â”‚  â”‚  ì¸ì¦    â”‚  â”‚
â”‚  â”‚ ì„œë¹„ìŠ¤     â”‚  â”‚ ì„œë¹„ìŠ¤     â”‚  â”‚  ì„œë¹„ìŠ¤    â”‚  â”‚ ì„œë¹„ìŠ¤   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì™¸ë¶€ ì„œë¹„ìŠ¤                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Database  â”‚  â”‚   Email    â”‚  â”‚   Storage  â”‚  â”‚   CDN    â”‚  â”‚
â”‚  â”‚ (Postgres) â”‚  â”‚  (Resend)  â”‚  â”‚  (AWS S3)  â”‚  â”‚CloudFrontâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

### Frontend

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|-----------|
| **Next.js 15** | í”„ë ˆì„ì›Œí¬ | ìµœì‹  App Router, SSR/SSGë¡œ SEO ìµœì í™” |
| **TypeScript** | ì–¸ì–´ | íƒ€ì… ì•ˆì •ì„±, ê°œë°œ ìƒì‚°ì„± |
| **TailwindCSS** | ìŠ¤íƒ€ì¼ë§ | ë¹ ë¥¸ UI ê°œë°œ, ì¼ê´€ëœ ë””ìì¸ |
| **shadcn/ui** | UI ì»´í¬ë„ŒíŠ¸ | ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš©ì´, ì ‘ê·¼ì„± |
| **CKEditor** | ì—ë””í„° | ì™„ì„±ë„ ë†’ì€ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° |
| **React Query** | ë°ì´í„° í˜ì¹­ | ì„œë²„ ë°ì´í„° ìºì‹±, ìš”ì²­ ìƒíƒœ ê´€ë¦¬ |
| **Jotai v2** | ìƒíƒœ ê´€ë¦¬ | ì§ê´€ì ì¸ ì „ì—­ ìƒíƒœ ê´€ë¦¬, ê°€ë²¼ì›€ |

### Backend

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|-----------|
| **NestJS** | API ì„œë²„ | êµ¬ì¡°í™”ëœ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜, DI/IoC ì§€ì› |
| **Prisma** | ORM | íƒ€ì… ì•ˆì „í•œ DB ì ‘ê·¼, ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬ |
| **PostgreSQL** | ë°ì´í„°ë² ì´ìŠ¤ | ì•ˆì •ì„±, í™•ì¥ì„±, ê´€ê³„í˜• ë°ì´í„° ì²˜ë¦¬ |
| **Swagger** | API ë¬¸ì„œí™” | OpenAPI ìŠ¤í™, ìë™ ë¬¸ì„œ ìƒì„± |
| **OpenAPI Codegen** | API í´ë¼ì´ì–¸íŠ¸ | í”„ë¡ íŠ¸ì—”ë“œ API í˜¸ì¶œ ìë™ ìƒì„± |

### Infrastructure

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|-----------|
| **Docker** | ì»¨í…Œì´ë„ˆ | ì¼ê´€ëœ ê°œë°œ/ë°°í¬ í™˜ê²½ êµ¬ì„± |
| **AWS S3** | íŒŒì¼ ìŠ¤í† ë¦¬ì§€ | ì´ë¯¸ì§€/ì²¨ë¶€íŒŒì¼ ì €ì¥ |
| **AWS CloudFront** | CDN | ë¹ ë¥¸ ì½˜í…ì¸  ì „ì†¡, ìºì‹± |
| **Vercel** | í”„ë¡ íŠ¸ì—”ë“œ í˜¸ìŠ¤íŒ… | Next.js ìµœì í™”, ê°„í¸í•œ ë°°í¬ |
| **AWS EC2** or **Railway** | ë°±ì—”ë“œ í˜¸ìŠ¤íŒ… | NestJS ì„œë²„ ë°°í¬ |

### ì¸ì¦ & ë³´ì•ˆ

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|-----------|
| **Auth.js (NextAuth)** | í”„ë¡ íŠ¸ì—”ë“œ ì¸ì¦ | Next.js í†µí•©, SSR ì„¸ì…˜ ê´€ë¦¬ |
| **JWT** | í† í° ì¸ì¦ | Stateless ì¸ì¦, ë°±ì—”ë“œ ì—°ë™ |
| **NestJS Auth Guard** | API ë³´í˜¸ | ë¼ìš°íŠ¸ë³„ ì¸ê°€ ì²˜ë¦¬ |

### External Services

| ì„œë¹„ìŠ¤ | ìš©ë„ | ëŒ€ì•ˆ |
|--------|------|------|
| **Resend** | ì´ë©”ì¼ ë°œì†¡ | SendGrid, AWS SES |
| **Vercel OG** | OG ì´ë¯¸ì§€ ìƒì„± | Satori |
| **Cursor AI** | ê°œë°œ íš¨ìœ¨í™” | GitHub Copilot |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ëª¨ë…¸ë ˆí¬ êµ¬ì¡° (ê¶Œì¥)

```
vality/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                       # Next.js 15 í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/               # App Router
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/        # ì¸ì¦ í˜ì´ì§€ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/   # ëŒ€ì‹œë³´ë“œ (ë¡œê·¸ì¸ í•„ìš”)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ newsletters/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subscribers/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ @[username]/   # ì‚¬ìš©ì ê³µê°œ í˜ì´ì§€
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx   # í”„ë¡œí•„/Bio
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [slug]/    # ê²Œì‹œê¸€ ìƒì„¸
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ui/            # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ editor/        # CKEditor ê´€ë ¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ newsletter/    # ë‰´ìŠ¤ë ˆí„° ê´€ë ¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ common/        # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/           # OpenAPI ìë™ ìƒì„± í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/          # Auth.js ì„¤ì •
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ utils/         # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/            # Jotai atoms
â”‚   â”‚   â”‚   â””â”€â”€ types/             # íƒ€ì… ì •ì˜
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ api/                       # NestJS ë°±ì—”ë“œ
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ modules/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth/          # ì¸ì¦ ëª¨ë“ˆ
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚       â”‚   â”‚   â”œâ”€â”€ user/          # ì‚¬ìš©ì ëª¨ë“ˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ newsletter/    # ë‰´ìŠ¤ë ˆí„° ëª¨ë“ˆ
â”‚       â”‚   â”‚   â”œâ”€â”€ subscriber/    # êµ¬ë…ì ëª¨ë“ˆ
â”‚       â”‚   â”‚   â””â”€â”€ email/         # ì´ë©”ì¼ ëª¨ë“ˆ
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ common/
â”‚       â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚       â”‚   â”‚   â”œâ”€â”€ filters/
â”‚       â”‚   â”‚   â””â”€â”€ interceptors/
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ prisma/
â”‚       â”‚   â”‚   â””â”€â”€ prisma.service.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ app.module.ts
â”‚       â”‚   â””â”€â”€ main.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ prisma/
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â”‚
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/                      # ê³µìœ  íŒ¨í‚¤ì§€
â”‚   â””â”€â”€ shared/                    # ê³µìœ  íƒ€ì…/ìœ í‹¸
â”‚
â”œâ”€â”€ docker-compose.yml             # ë¡œì»¬ ê°œë°œ í™˜ê²½
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ package.json
```

---

## ğŸ³ Docker ì„¤ì •

### docker-compose.yml

```yaml
version: '3.8'

services:
  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:15-alpine
    container_name: vality-postgres
    environment:
      POSTGRES_USER: vality
      POSTGRES_PASSWORD: vality_password
      POSTGRES_DB: vality_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U vality"]
      interval: 5s
      timeout: 5s
      retries: 5

  # Redis (ì„ íƒì  - ìºì‹±/ì„¸ì…˜ìš©)
  redis:
    image: redis:7-alpine
    container_name: vality-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

### ë¡œì»¬ ê°œë°œ ì‹œì‘

```bash
# Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ (PostgreSQL)
docker-compose up -d

# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# DB ë§ˆì´ê·¸ë ˆì´ì…˜
cd apps/api && pnpm prisma migrate dev

# Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
pnpm prisma generate

# ì‹œë“œ ë°ì´í„° (ì„ íƒ)
pnpm prisma db seed

# ê°œë°œ ì„œë²„ ì‹œì‘ (ëª¨ë…¸ë ˆí¬ ë£¨íŠ¸ì—ì„œ)
pnpm dev
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (ì´ˆì•ˆ)

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String       @id @default(cuid())
  email         String       @unique
  username      String       @unique
  name          String?
  bio           String?
  avatarUrl     String?
  passwordHash  String?      // ìì²´ íšŒì›ê°€ì…ìš©
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  
  newsletters   Newsletter[]
  subscribers   Subscriber[]
  
  @@map("users")
}

model Newsletter {
  id            String       @id @default(cuid())
  title         String
  slug          String
  content       String       @db.Text
  excerpt       String?
  coverImageUrl String?
  status        PostStatus   @default(DRAFT)
  publishedAt   DateTime?
  scheduledAt   DateTime?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  
  author        User         @relation(fields: [authorId], references: [id], onDelete: Cascade)
  authorId      String
  
  emailLogs     EmailLog[]
  
  @@unique([authorId, slug])
  @@index([authorId, status])
  @@index([publishedAt])
  @@map("newsletters")
}

enum PostStatus {
  DRAFT
  SCHEDULED
  PUBLISHED
  ARCHIVED
}

model Subscriber {
  id             String       @id @default(cuid())
  email          String
  status         SubStatus    @default(PENDING)
  subscribedAt   DateTime     @default(now())
  confirmedAt    DateTime?
  unsubscribedAt DateTime?
  
  user           User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId         String
  
  emailLogs      EmailLog[]
  
  @@unique([userId, email])
  @@index([userId, status])
  @@map("subscribers")
}

enum SubStatus {
  PENDING      // í™•ì¸ ëŒ€ê¸°
  ACTIVE       // í™œì„±
  UNSUBSCRIBED // êµ¬ë… ì·¨ì†Œ
}

model EmailLog {
  id            String       @id @default(cuid())
  status        EmailStatus  @default(PENDING)
  sentAt        DateTime?
  openedAt      DateTime?
  clickedAt     DateTime?
  createdAt     DateTime     @default(now())
  
  newsletter    Newsletter   @relation(fields: [newsletterId], references: [id], onDelete: Cascade)
  newsletterId  String
  
  subscriber    Subscriber   @relation(fields: [subscriberId], references: [id], onDelete: Cascade)
  subscriberId  String
  
  @@index([newsletterId])
  @@index([subscriberId])
  @@map("email_logs")
}

enum EmailStatus {
  PENDING
  SENT
  DELIVERED
  OPENED
  CLICKED
  BOUNCED
  FAILED
}
```

---

## ğŸ”Œ Swagger & OpenAPI Codegen

### NestJS Swagger ì„¤ì •

```typescript
// apps/api/src/main.ts
import { NestFactory } from '@nestjs/core';
import { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  // CORS ì„¤ì •
  app.enableCors({
    origin: process.env.FRONTEND_URL || 'http://localhost:3000',
    credentials: true,
  });
  
  // Swagger ì„¤ì •
  const config = new DocumentBuilder()
    .setTitle('Vality API')
    .setDescription('ë‰´ìŠ¤ë ˆí„° + ì›¹ ì•„ì¹´ì´ë¹™ í”Œë«í¼ API')
    .setVersion('1.0')
    .addBearerAuth()
    .build();
  
  const document = SwaggerModule.createDocument(app, config);
  SwaggerModule.setup('api-docs', app, document);
  
  // OpenAPI JSON íŒŒì¼ ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œìš©)
  const fs = require('fs');
  fs.writeFileSync('./openapi.json', JSON.stringify(document, null, 2));
  
  await app.listen(4000);
}
bootstrap();
```

### í”„ë¡ íŠ¸ì—”ë“œ API í´ë¼ì´ì–¸íŠ¸ ìë™ ìƒì„±

```bash
# openapi-generator ì„¤ì¹˜
npm install @openapitools/openapi-generator-cli -g

# API í´ë¼ì´ì–¸íŠ¸ ìƒì„±
openapi-generator-cli generate \
  -i http://localhost:4000/api-docs-json \
  -g typescript-axios \
  -o apps/web/src/lib/api/generated
```

---

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì¸ì¦ & ì¸ê°€
- Auth.js + JWT ì¡°í•©ìœ¼ë¡œ SSR/CSR ëª¨ë‘ ì§€ì›
- NestJS Auth Guardë¡œ API ë³´í˜¸
- RBAC(Role-Based Access Control) ì ìš©

### ë°ì´í„° ë³´í˜¸
- ëª¨ë“  API í†µì‹  HTTPS
- ë¹„ë°€ë²ˆí˜¸ bcrypt í•´ì‹±
- SQL Injection ë°©ì§€ (Prisma ORM)
- XSS ë°©ì§€ (React ê¸°ë³¸ ì´ìŠ¤ì¼€ì´í”„ + DOMPurify)

### ì´ë©”ì¼ ë³´ì•ˆ
- ë”ë¸” ì˜µíŠ¸ì¸ êµ¬í˜„
- êµ¬ë… ì·¨ì†Œ ë§í¬ í•„ìˆ˜ í¬í•¨
- SPF, DKIM, DMARC ì„¤ì •

### Rate Limiting
- NestJS Throttlerë¡œ API ìš”ì²­ ì œí•œ
- ì´ë©”ì¼ ë°œì†¡ ì œí•œ
- êµ¬ë… ìš”ì²­ ì œí•œ (ìŠ¤íŒ¸ ë°©ì§€)

---

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- Node.js 20+ (LTS)
- pnpm 8+
- Docker Desktop
- PostgreSQL 15+ (Dockerë¡œ ì‹¤í–‰)

### í™˜ê²½ ë³€ìˆ˜

```env
# apps/web/.env.local
NEXT_PUBLIC_API_URL=http://localhost:4000
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET="your-secret-key"

# apps/api/.env
DATABASE_URL="postgresql://vality:vality_password@localhost:5432/vality_db"
JWT_SECRET="your-jwt-secret"
FRONTEND_URL="http://localhost:3000"

# AWS S3
AWS_ACCESS_KEY_ID="..."
AWS_SECRET_ACCESS_KEY="..."
AWS_REGION="ap-northeast-2"
AWS_S3_BUCKET="vality-uploads"
AWS_CLOUDFRONT_DOMAIN="xxx.cloudfront.net"

# Email (Resend)
RESEND_API_KEY="re_..."
```

### ê°œë°œ ëª…ë ¹ì–´

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# Docker ì»¨í…Œì´ë„ˆ ì‹œì‘
docker-compose up -d

# DB ë§ˆì´ê·¸ë ˆì´ì…˜
pnpm --filter api prisma migrate dev

# ê°œë°œ ì„œë²„ ì‹œì‘ (í”„ë¡ íŠ¸ì—”ë“œ + ë°±ì—”ë“œ ë™ì‹œ)
pnpm dev

# í”„ë¡ íŠ¸ì—”ë“œë§Œ ì‹œì‘
pnpm --filter web dev

# ë°±ì—”ë“œë§Œ ì‹œì‘
pnpm --filter api dev

# API í´ë¼ì´ì–¸íŠ¸ ì¬ìƒì„±
pnpm generate:api
```

---

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤

### Phase 1 (MVP)
- Vercel (í”„ë¡ íŠ¸ì—”ë“œ) + Railway/Render (ë°±ì—”ë“œ)
- ë‹¨ì¼ PostgreSQL ì¸ìŠ¤í„´ìŠ¤
- ì†Œê·œëª¨ íŠ¸ë˜í”½ ì²˜ë¦¬

### Phase 2 (ì„±ì¥)
- AWS EC2 ë˜ëŠ” ECSë¡œ ë°±ì—”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜
- RDS PostgreSQLë¡œ DB ë§ˆì´ê·¸ë ˆì´ì…˜
- Redis ìºì‹± ë„ì…

### Phase 3 (ìŠ¤ì¼€ì¼)
- DB ì½ê¸° ë³µì œë³¸
- ì´ë©”ì¼ ë°œì†¡ í ì‹œìŠ¤í…œ (Bull/BullMQ)
- CloudFront ìºì‹± ê°•í™”
